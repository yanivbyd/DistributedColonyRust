Parquet Schema for Colony Events Analytics
===========================================

This document describes the schema of Parquet files generated by ingest_bi.py for colony events.
Each row represents a single event that occurred during the colony simulation.

Core Metadata Fields
--------------------
- colony_id (string): Colony instance identifier
- tick (integer): Simulation tick number when the event occurred (may be null for some events)
- event_type (string): Human-readable event type (e.g., "More Food", "ColonyCreated", "Create Creature", "Extinction", "New Topography", "Colony Rules Change")
- event_description (string): Human-readable description of the event (may be null for some events)

Rules Fields (Current Colony Rules at Event Time)
--------------------------------------------------
- rules_health_cost_per_size_unit (integer): Health cost per size unit
- rules_eat_capacity_per_size_unit (integer): Eat capacity per size unit
- rules_health_cost_if_can_kill (integer): Additional health cost if creature can kill
- rules_health_cost_if_can_move (integer): Additional health cost if creature can move
- rules_mutation_chance (integer): Mutation chance (0-100)
- rules_random_death_chance (integer): Random death chance (0-100)

Event Data Fields (Type-Specific)
----------------------------------
The following fields are populated based on the event_data_type. Fields not relevant to a specific event type will be NULL.

- event_data_type (string): The type of event data structure. One of:
  - "CreateCreature": A creature creation event
  - "ChangeExtraFoodPerTick": Food change event
  - "Extinction": Extinction event
  - "NewTopography": Topography change event
  - "ChangeColonyRules": Colony rules change event
  - "Unknown": Unknown or unrecognized event type
  - NULL: No event data (e.g., ColonyCreated events)

- event_data_value (string): 
  - For "ChangeExtraFoodPerTick": The change amount as a string (e.g., "2" or "-1")
  - For "ChangeColonyRules": The description string
  - For other event types: NULL

CreateCreature Event Fields
----------------------------
These fields are populated only when event_data_type = "CreateCreature":

- event_data_region_type (string): Type of region (currently only "Ellipse")
- event_data_region_x (integer): X coordinate of region center
- event_data_region_y (integer): Y coordinate of region center
- event_data_region_radius_x (integer): X radius of ellipse region
- event_data_region_radius_y (integer): Y radius of ellipse region
- event_data_color_r (integer): Red component of creature color (0-255)
- event_data_color_g (integer): Green component of creature color (0-255)
- event_data_color_b (integer): Blue component of creature color (0-255)
- event_data_traits_size (integer): Size trait of the created creature
- event_data_traits_can_kill (boolean): Whether the creature can kill
- event_data_traits_can_move (boolean): Whether the creature can move
- event_data_starting_health (integer): Starting health of the created creature

ChangeColonyRules Event Fields
------------------------------
These fields are populated only when event_data_type = "ChangeColonyRules":

- event_data_new_rules_health_cost_per_size_unit (integer): New health cost per size unit
- event_data_new_rules_eat_capacity_per_size_unit (integer): New eat capacity per size unit
- event_data_new_rules_health_cost_if_can_kill (integer): New health cost if can kill
- event_data_new_rules_health_cost_if_can_move (integer): New health cost if can move
- event_data_new_rules_mutation_chance (integer): New mutation chance (0-100)
- event_data_new_rules_random_death_chance (integer): New random death chance (0-100)

Notes
-----
- All event data fields except event_data_type and event_data_value are NULL for events that don't have that specific data structure
- The rules_* fields represent the colony rules that were in effect at the time the event occurred
- For ChangeColonyRules events, both rules_* (old rules) and event_data_new_rules_* (new rules) fields are populated
- Event types like "Extinction" and "NewTopography" have minimal data (only event_data_type is set)
- ColonyCreated events have no event_data, so event_data_type and all event_data_* fields are NULL
- The event_type field is a human-readable string that may differ from event_data_type (e.g., "More Food" vs "ChangeExtraFoodPerTick")

