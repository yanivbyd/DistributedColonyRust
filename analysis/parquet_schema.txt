Parquet Schema for Stats Shots Analytics
==========================================

This document describes the schema of Parquet files generated by stats_shots_to_parquet.py.
Each row represents a single stats snapshot (one tick) for a colony.

Core Metadata Fields
--------------------
- colony_id (string): Colony instance identifier
- tick (integer): Simulation tick number
- creatures_count (integer): Total number of creatures in the colony at this tick
- created_at_utc (string): ISO 8601 timestamp when the snapshot was created
- colony_width (integer): Width of the colony grid in cells
- colony_height (integer): Height of the colony grid in cells

Creature Size Histogram Fields
-------------------------------
- creature_size_mean (float): Mean creature size (from histogram average)
- creature_size_avg (float): Alias for creature_size_mean
- creature_size_p50 (float): 50th percentile (median) creature size
- creature_size_p90 (float): 90th percentile creature size
- creature_size_p99 (float): 99th percentile creature size
- creature_size_was_cut (boolean): Whether the histogram was truncated due to too many unique values
- creature_size_unique_values_count (integer): Number of unique creature size values in the distribution

Health Histogram Fields
-----------------------
- health_mean (float): Mean creature health (from histogram average)
- health_avg (float): Alias for health_mean
- health_p50 (float): 50th percentile (median) creature health
- health_p90 (float): 90th percentile creature health
- health_p99 (float): 99th percentile creature health
- health_was_cut (boolean): Whether the histogram was truncated due to too many unique values
- health_unique_values_count (integer): Number of unique health values in the distribution

Food Histogram Fields
---------------------
- food_mean (float): Mean creature food level (from histogram average)
- food_avg (float): Alias for food_mean
- food_p50 (float): 50th percentile (median) creature food level
- food_p90 (float): 90th percentile creature food level
- food_p99 (float): 99th percentile creature food level
- food_was_cut (boolean): Whether the histogram was truncated due to too many unique values
- food_unique_values_count (integer): Number of unique food values in the distribution

Age Histogram Fields
--------------------
- age_mean (float): Mean creature age (from histogram average)
- age_avg (float): Alias for age_mean
- age_p50 (float): 50th percentile (median) creature age
- age_p90 (float): 90th percentile creature age
- age_p99 (float): 99th percentile creature age
- age_was_cut (boolean): Whether the histogram was truncated due to too many unique values
- age_unique_values_count (integer): Number of unique age values in the distribution

Can Kill (Boolean) Histogram Fields
------------------------------------
- can_kill_true_count (integer): Number of creatures that can kill
- can_kill_false_count (integer): Number of creatures that cannot kill
- can_kill_true_fraction (float): Fraction of creatures that can kill (0.0 to 1.0)
- can_kill_average (float): Average value (same as true_fraction for boolean)
- can_kill_was_cut (boolean): Whether the histogram was truncated
- can_kill_unique_values_count (integer): Number of unique values (should be 2 for boolean)

Can Move (Boolean) Histogram Fields
------------------------------------
- can_move_true_count (integer): Number of creatures that can move
- can_move_false_count (integer): Number of creatures that cannot move
- can_move_true_fraction (float): Fraction of creatures that can move (0.0 to 1.0)
- can_move_average (float): Average value (same as true_fraction for boolean)
- can_move_was_cut (boolean): Whether the histogram was truncated
- can_move_unique_values_count (integer): Number of unique values (should be 2 for boolean)

Notes
-----
- All float fields may be NULL/None if the histogram is empty or cannot be computed
- Percentiles (p50, p90, p99) are computed from the distribution data
- Mean/avg values use the histogram's pre-computed average when available
- Boolean histograms represent binary traits (can_kill, can_move) as 0/1 counts

